{"version":3,"sources":["components/Loader/index.js","components/Message/index.js","components/Rating/index.js","views/Store/ProductScreen/index.js","api/index.js"],"names":["Loader","animation","role","style","height","width","display","margin","Message","variant","children","React","useState","open","setOpen","onClose","Rating","value","text","color","className","qtys","initialState","name","comment","rating","user","ProductScreen","history","productId","match","params","id","dispatch","useDispatch","qty","setQty","setRating","productDetails","useSelector","state","errorDetails","error","loadingDetails","loading","product","success","userInfo","userLogin","productReview","loadingRev","successRev","errorRev","useEffect","callApi","SUCESS","actions","PRODUCT_DETAILS_SUCCESS","FAIL","PRODUCT_DETAILS_FAIL","REQUEST","PRODUCT_DETAILS_REQUEST","type","PRODUCT_REVIEW_RESET","minHeight","marginTop","overflowX","marginBottom","to","prodName","md","src","prodPic","prodPrice","href","target","class","prodDesc","Control","as","onChange","e","map","x","onClick","push","prodId","onSubmit","preventDefault","PRODUCT_REVIEW_SUCCESS","PRODUCT_REVIEW_REQUEST","PRODUCT_REVIEW_FAIL","token","Group","Label","row","event","reviews","item","Item","revName","revRating","revDate","substring","revComment","url","method","body","constants","isImage","undefined","a","axios","data","headers","payload","console","log","message"],"mappings":"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","file":"static/js/13.339591be.chunk.js","sourcesContent":["import { Spinner } from \"react-bootstrap\";\nexport default function Loader() {\n  return (\n    <Spinner\n      animation=\"border\"\n      role=\"status\"\n      style={{\n        height: \"100px\",\n        width: \"100px\",\n        display: \"block\",\n        margin: \"auto\",\n      }}\n    />\n  );\n}","import React from 'react'\nimport { Alert } from 'react-bootstrap'\nexport default function Message({variant, children}){\n    const [open, setOpen] = React.useState(true);\n    if (open){\n        return (\n            <Alert  variant={variant} onClose={()=>setOpen(!open)}>\n                {children}\n            </Alert>\n        )\n    }else{\n        return null;\n    }\n}","import React from \"react\";\n\nfunction Rating({ value, text, color }) {\n  return (\n    <div className=\"rating\">\n      <span>\n        <i\n          style={{ color }}\n          className={\n            value >= 1\n              ? \"fas fa-star\"\n              : value >= 0.5\n                ? \"fas fa-star-half-alt\"\n                : \"far fa-star\"\n          }\n        ></i>\n      </span>\n\n      <span>\n        <i\n          style={{ color }}\n          className={\n            value >= 2\n              ? \"fas fa-star\"\n              : value >= 1.5\n                ? \"fas fa-star-half-alt\"\n                : \"far fa-star\"\n          }\n        ></i>\n      </span>\n\n      <span>\n        <i\n          style={{ color }}\n          className={\n            value >= 3\n              ? \"fas fa-star\"\n              : value >= 2.5\n                ? \"fas fa-star-half-alt\"\n                : \"far fa-star\"\n          }\n        ></i>\n      </span>\n\n      <span>\n        <i\n          style={{ color }}\n          className={\n            value >= 4\n              ? \"fas fa-star\"\n              : value >= 3.5\n                ? \"fas fa-star-half-alt\"\n                : \"far fa-star\"\n          }\n        ></i>\n      </span>\n\n      <span>\n        <i\n          style={{ color }}\n          className={\n            value >= 5\n              ? \"fas fa-star\"\n              : value >= 4.5\n                ? \"fas fa-star-half-alt\"\n                : \"far fa-star\"\n          }\n        ></i>\n      </span>\n      <span>{text && text}</span>\n    </div>\n  );\n}\n\nexport default Rating;","import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport {\n  Row,\n  Col,\n  Container,\n  Button,\n  Image,\n  ListGroupItem,\n  ListGroup,\n  Form,\n} from \"react-bootstrap\";\nimport Zoom from \"react-medium-image-zoom\";\nimport \"react-medium-image-zoom/dist/styles.css\";\n\nimport { FacebookIcon } from \"react-share\";\n\nimport Rating from \"../../../components/Rating\";\n\nimport { Link } from \"react-router-dom\";\n\nimport Loader from \"../../../components/Loader\";\nimport Message from \"../../../components/Message\";\n\nimport { callApi } from \"../../../api\";\nimport { actions } from \"../../../constants/productConstants\";\n\nimport \"./styles.css\";\nconst qtys = [1, 2, 3, 4, 5, 6, 7, 8];\nconst initialState = {\n  name: \"\",\n  comment: \"\",\n  rating: 0,\n  user: null,\n};\nexport default function ProductScreen({ history, match }) {\n  const productId = match.params.id;\n  const dispatch = useDispatch();\n  const [qty, setQty] = useState(1);\n\n  const [rating, setRating] = useState(initialState);\n\n  const productDetails = useSelector((state) => state.productDetails);\n  const {\n    error: errorDetails,\n    loading: loadingDetails,\n    success: successDetails,\n    product,\n  } = productDetails;\n  const addToCartHandler = (e) => {\n    userInfo\n      ? history.push(`/cart/${product.prodId}?qty=${qty}`)\n      : history.push(\"/login\");\n  };\n  const userLogin = useSelector((state) => state.userLogin);\n  const { userInfo } = userLogin;\n\n  const productReview = useSelector((state) => state.productReview);\n  const {\n    loading: loadingRev,\n    success: successRev,\n    error: errorRev,\n  } = productReview;\n\n  const handleChange = (event) => {\n    setRating({\n      ...rating,\n      [event.target.name]: event.target.value,\n    });\n  };\n  const submitHandler = (e) => {\n    e.preventDefault();\n    dispatch(\n      callApi(\n        `/api/products/createreview/${product?.prodId}/`,\n        \"POST\",\n        rating,\n        {\n          SUCESS: actions.PRODUCT_REVIEW_SUCCESS,\n          REQUEST: actions.PRODUCT_REVIEW_REQUEST,\n          FAIL: actions.PRODUCT_REVIEW_FAIL,\n        },\n        false,\n        userInfo?.token\n      )\n    );\n  };\n  useEffect(() => {\n    dispatch(\n      callApi(\n        `/api/products/getproduct/${productId}/`,\n        \"GET\",\n        {},\n        {\n          SUCESS: actions.PRODUCT_DETAILS_SUCCESS,\n          FAIL: actions.PRODUCT_DETAILS_FAIL,\n          REQUEST: actions.PRODUCT_DETAILS_REQUEST,\n        }\n      )\n    );\n    if (userInfo) {\n      setRating({\n        ...rating,\n        [\"name\"]: userInfo?.name,\n        [\"user\"]: userInfo?.id,\n      });\n    }\n  }, [productId, history, userInfo, successRev]);\n  useEffect(() => {\n    dispatch({ type: actions.PRODUCT_REVIEW_RESET });\n  }, [history]);\n  return loadingDetails ? (\n    <div style={{ minHeight: \"100vh\", marginTop: \"15vh\" }}>\n      <Loader />\n    </div>\n  ) : errorDetails ? (\n    <div style={{ minHeight: \"100vh\", marginTop: \"15vh\" }}>\n      <Message variant=\"danger\">{errorDetails}</Message>\n    </div>\n  ) : (\n    <div\n      style={{ marginTop: \"10vh\", overflowX: \"hidden\", marginBottom: \"5vh\" }}\n    >\n      <Container className=\"p-5\" data-aos={\"fade-down\"}>\n        <div>\n          <Link to=\"/\">\n            <Button>\n              {\" \"}\n              <i className=\"fas fa-exchange-alt\"></i> Regresar\n            </Button>\n          </Link>\n          <h1 className=\"text-primary mt-3\">{product?.prodName}</h1>\n          {/* {product?.categorie[\"name\"] && (\n            <h5 className=\"text-dark\">\n              Categoria: {product?.categorie[\"name\"]}\n            </h5>\n          )} */}\n        </div>\n      </Container>\n      <Container>\n        <Row>\n          <Col md={5}>\n            <Zoom>\n              <img\n                className=\"image-product\"\n                src={`https://res.cloudinary.com/jordiespinoza/${product?.prodPic}`}\n              />\n            </Zoom>\n          </Col>\n          <Col md={4} className=\"p-5\">\n            <h1>\n              $ {product?.prodPrice}\n              MXN\n            </h1>\n            <Rating value={product?.rating} color=\"#d3a007\" />\n            <a\n              href={`https://www.facebook.com/sharer/sharer.php?s=100&p[url]=https://obioshop.herokuapp.com/#/products/${productId}&p[images][0]=&p[title]=Title%20Goes%20Here&p[summary]=Description%20goes%20here!`}\n              target=\"_blank\"\n            >\n              <button type=\"button\" class=\"btn btn-facebook btn-lg\">\n                <i class=\"fab fa-facebook-f\"></i> Compartir en Facebook\n              </button>\n            </a>\n            <span>{product?.prodDesc}</span>\n            {/* <br/>\n            <FacebookIcon /> */}\n            <br />\n            <br />\n            <h6>\n              Cantidad a comprar <i class=\"fas fa-shopping-basket\"></i>\n            </h6>\n            <Form.Control\n              as=\"select\"\n              className=\"mb-3\"\n              value={qty}\n              onChange={(e) => setQty(e.target.value)}\n            >\n              {qtys.map((x) => (\n                <option key={x} value={x}>\n                  {x}\n                </option>\n              ))}\n            </Form.Control>\n            <Button\n              variant=\"success\"\n              type=\"button\"\n              onClick={addToCartHandler}\n              className=\"btn btn-primary\"\n            >\n              Añadir al carro <i className=\"fas fa-shopping-cart\"></i>\n            </Button>\n          </Col>\n          <Col md={3}>\n            {userInfo ? (\n              <Form onSubmit={submitHandler}>\n                <Form.Group>\n                  <Form.Label>Calificación</Form.Label>\n                  <Form.Control\n                    as=\"select\"\n                    // value={rating}\n                    onChange={(e) =>\n                      setRating({\n                        ...rating,\n                        [\"rating\"]: e.target.value,\n                      })\n                    }\n                  >\n                    <option value=\"0\">Selecciona una opción</option>\n                    <option value=\"1\">1 - Muy malo</option>\n                    <option value=\"2\">2 - Malo</option>\n                    <option value=\"3\">3 - Bueno</option>\n                    <option value=\"4\">4 - Muy bueno</option>\n                    <option value=\"5\">5 - Excelente</option>\n                  </Form.Control>\n                </Form.Group>\n                <Form.Group>\n                  <Form.Label>Comentarios</Form.Label>\n                  <Form.Control\n                    as=\"textarea\"\n                    row=\"5\"\n                    name=\"comment\"\n                    onChange={handleChange}\n                    // value={comment}\n                    // onChange={(e) => setComment(e.target.value)}\n                  ></Form.Control>\n                </Form.Group>\n                {errorRev && (\n                  <Message variant=\"danger\">Ingresa una calificación</Message>\n                )}\n                {successRev && (\n                  <Message variant=\"success\">Review agregada</Message>\n                )}\n                {loadingRev ? (\n                  <Loader />\n                ) : (\n                  <Button variant=\"success\" type=\"submit\">\n                    Enviar\n                  </Button>\n                )}\n              </Form>\n            ) : (\n              <Message variant=\"info\">\n                Para realizar una review debes hacer{\" \"}\n                <Link to=\"/login\">login</Link>\n              </Message>\n            )}\n            <h3>Comentarios</h3>\n            <ListGroup variant=\"flush\">\n              {product?.reviews?.map((item) => (\n                <ListGroup.Item>\n                  <strong>{item.revName}</strong>\n                  <Rating value={item.revRating} color=\"#d3a007\" />\n                  <p>{item.revDate.substring(0, 10)}</p>\n                  <p>{item.revComment}</p>\n                </ListGroup.Item>\n              ))}\n            </ListGroup>\n          </Col>\n        </Row>\n        <hr />\n      </Container>\n    </div>\n  );\n}\n","import axios from \"axios\";\n\nexport const callApi =\n  (url, method, body, constants, isImage = false, token=undefined) =>\n  async (dispatch) => {\n    const { REQUEST, SUCESS, FAIL } = constants;\n    try {\n      \n      dispatch({ type: REQUEST });\n      const { data } = await axios({\n        method,\n        url: url,\n        data: body,\n        headers: {\n          \"Content-Type\": isImage ? \"multipart/form-data\" : \"application/json\",\n          'Authorization': token ? `Bearer ${token}` : \"\",\n        },\n      });\n      dispatch({ type: SUCESS, payload: data });\n    } catch (error) {\n      console.log(error)\n      dispatch({\n        type: FAIL,\n        payload: error.message,\n      });\n    }\n  };"],"sourceRoot":""}