{"version":3,"sources":["components/Rating/index.js","views/Store/ProductScreen/index.js","api/index.js","components/Loader/index.js","components/Message/index.js"],"names":["Rating","value","text","color","className","style","initialState","name","comment","rating","user","ProductScreen","history","productId","match","params","id","dispatch","useDispatch","useState","setRating","productDetails","useSelector","state","errorDetails","error","loadingDetails","loading","product","success","userInfo","userLogin","productReview","loadingRev","successRev","errorRev","useEffect","callApi","SUCESS","actions","PRODUCT_DETAILS_SUCCESS","FAIL","PRODUCT_DETAILS_FAIL","REQUEST","PRODUCT_DETAILS_REQUEST","type","PRODUCT_REVIEW_RESET","minHeight","marginTop","variant","overflowX","marginBottom","to","prodName","md","src","prodPic","prodPrice","prodDesc","onSubmit","e","preventDefault","prodId","PRODUCT_REVIEW_SUCCESS","PRODUCT_REVIEW_REQUEST","PRODUCT_REVIEW_FAIL","token","Group","Label","Control","as","onChange","target","row","event","reviews","map","item","Item","revName","revRating","revDate","substring","revComment","url","method","body","constants","isImage","undefined","a","axios","data","headers","payload","console","log","message","Loader","animation","role","height","width","display","margin","Message","children","React","open","setOpen","onClose"],"mappings":"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","file":"static/js/10.d11314a9.chunk.js","sourcesContent":["import React from \"react\";\n\nfunction Rating({ value, text, color }) {\n  return (\n    <div className=\"rating\">\n      <span>\n        <i\n          style={{ color }}\n          className={\n            value >= 1\n              ? \"fas fa-star\"\n              : value >= 0.5\n                ? \"fas fa-star-half-alt\"\n                : \"far fa-star\"\n          }\n        ></i>\n      </span>\n\n      <span>\n        <i\n          style={{ color }}\n          className={\n            value >= 2\n              ? \"fas fa-star\"\n              : value >= 1.5\n                ? \"fas fa-star-half-alt\"\n                : \"far fa-star\"\n          }\n        ></i>\n      </span>\n\n      <span>\n        <i\n          style={{ color }}\n          className={\n            value >= 3\n              ? \"fas fa-star\"\n              : value >= 2.5\n                ? \"fas fa-star-half-alt\"\n                : \"far fa-star\"\n          }\n        ></i>\n      </span>\n\n      <span>\n        <i\n          style={{ color }}\n          className={\n            value >= 4\n              ? \"fas fa-star\"\n              : value >= 3.5\n                ? \"fas fa-star-half-alt\"\n                : \"far fa-star\"\n          }\n        ></i>\n      </span>\n\n      <span>\n        <i\n          style={{ color }}\n          className={\n            value >= 4\n              ? \"fas fa-star\"\n              : value >= 4.5\n                ? \"fas fa-star-half-alt\"\n                : \"far fa-star\"\n          }\n        ></i>\n      </span>\n      <span>{text && text}</span>\n    </div>\n  );\n}\n\nexport default Rating;","import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport {\n  Row,\n  Col,\n  Container,\n  Button,\n  Image,\n  ListGroupItem,\n  ListGroup,\n  Form,\n} from \"react-bootstrap\";\nimport Zoom from \"react-medium-image-zoom\";\nimport \"react-medium-image-zoom/dist/styles.css\";\n\nimport Rating from \"../../../components/Rating\";\n\nimport { Link } from \"react-router-dom\";\n\nimport Loader from \"../../../components/Loader\";\nimport Message from \"../../../components/Message\";\n\nimport { callApi } from \"../../../api\";\nimport { actions } from \"../../../constants/productConstants\";\n\nimport \"./styles.css\";\nconst initialState = {\n  name: \"\",\n  comment: \"\",\n  rating: 0,\n  user: null,\n};\nexport default function ProductScreen({ history, match }) {\n  const productId = match.params.id;\n  const dispatch = useDispatch();\n\n  const [rating, setRating] = useState(initialState);\n\n  const productDetails = useSelector((state) => state.productDetails);\n  const {\n    error: errorDetails,\n    loading: loadingDetails,\n    success: successDetails,\n    product,\n  } = productDetails;\n\n  const userLogin = useSelector((state) => state.userLogin);\n  const { userInfo } = userLogin;\n\n  const productReview = useSelector((state) => state.productReview);\n  const {\n    loading: loadingRev,\n    success: successRev,\n    error: errorRev,\n  } = productReview;\n\n  const handleChange = (event) => {\n    setRating({\n      ...rating,\n      [event.target.name]: event.target.value,\n    });\n  };\n  const submitHandler = (e) => {\n    e.preventDefault();\n    dispatch(\n      callApi(\n        `/api/products/createreview/${product?.prodId}/`,\n        \"POST\",\n        rating,\n        {\n          SUCESS: actions.PRODUCT_REVIEW_SUCCESS,\n          REQUEST: actions.PRODUCT_REVIEW_REQUEST,\n          FAIL: actions.PRODUCT_REVIEW_FAIL,\n        },\n        false,\n        userInfo?.token\n      )\n    );\n  };\n  useEffect(() => {\n    dispatch(\n      callApi(\n        `/api/products/getproduct/${productId}/`,\n        \"GET\",\n        {},\n        {\n          SUCESS: actions.PRODUCT_DETAILS_SUCCESS,\n          FAIL: actions.PRODUCT_DETAILS_FAIL,\n          REQUEST: actions.PRODUCT_DETAILS_REQUEST,\n        }\n      )\n    );\n    if (userInfo) {\n      setRating({\n        ...rating,\n        [\"name\"]: userInfo?.name,\n        [\"user\"]: userInfo?.id,\n      });\n    }\n  }, [productId, history, userInfo, successRev]);\n  useEffect(() => {\n    dispatch({ type: actions.PRODUCT_REVIEW_RESET });\n  }, [history]);\n  return loadingDetails ? (\n    <div style={{ minHeight: \"100vh\", marginTop: \"15vh\" }}>\n      <Loader />\n    </div>\n  ) : errorDetails ? (\n    <div style={{ minHeight: \"100vh\", marginTop: \"15vh\" }}>\n      <Message variant=\"danger\">{errorDetails}</Message>\n    </div>\n  ) : (\n    <div\n      style={{ marginTop: \"10vh\", overflowX: \"hidden\", marginBottom: \"5vh\" }}\n    >\n      <Container className=\"p-5\" data-aos={\"fade-down\"}>\n        <div>\n          <Link to=\"/\">\n            <Button>\n              {\" \"}\n              <i className=\"fas fa-exchange-alt\"></i> Regresar\n            </Button>\n          </Link>\n          <h1 className=\"text-primary mt-3\">{product?.prodName}</h1>\n          {/* {product?.categorie[\"name\"] && (\n            <h5 className=\"text-dark\">\n              Categoria: {product?.categorie[\"name\"]}\n            </h5>\n          )} */}\n        </div>\n      </Container>\n      <Container>\n        <Row>\n          <Col md={5}>\n            <Zoom>\n              <img\n                className=\"image-product\"\n                src={`https://res.cloudinary.com/jordiespinoza/${product?.prodPic}`}\n              />\n            </Zoom>\n          </Col>\n          <Col md={4} className=\"p-5\">\n            <h1>\n              $ {product?.prodPrice}\n              MXN\n            </h1>\n            <Rating value={product?.rating} color=\"#d3a007\" />\n\n            <span>{product?.prodDesc}</span>\n          </Col>\n          <Col md={3}>\n            {userInfo ? (\n              <Form onSubmit={submitHandler}>\n                <Form.Group>\n                  <Form.Label>Calificación</Form.Label>\n                  <Form.Control\n                    as=\"select\"\n                    // value={rating}\n                    onChange={(e) =>\n                      setRating({\n                        ...rating,\n                        [\"rating\"]: e.target.value,\n                      })\n                    }\n                  >\n                    <option value=\"0\">Selecciona una opción</option>\n                    <option value=\"1\">1 - Muy malo</option>\n                    <option value=\"2\">2 - Malo</option>\n                    <option value=\"3\">3 - Bueno</option>\n                    <option value=\"4\">4 - Muy bueno</option>\n                    <option value=\"5\">5 - Excelente</option>\n                  </Form.Control>\n                </Form.Group>\n                <Form.Group>\n                  <Form.Label>Comentarios</Form.Label>\n                  <Form.Control\n                    as=\"textarea\"\n                    row=\"5\"\n                    name=\"comment\"\n                    onChange={handleChange}\n                    // value={comment}\n                    // onChange={(e) => setComment(e.target.value)}\n                  ></Form.Control>\n                </Form.Group>\n                {errorRev && (\n                  <Message variant=\"danger\">Ingresa una calificación</Message>\n                )}\n                {successRev && (\n                  <Message variant=\"success\">Review agregada</Message>\n                )}\n                {loadingRev ? (\n                  <Loader />\n                ) : (\n                  <Button variant=\"success\" type=\"submit\">\n                    Enviar\n                  </Button>\n                )}\n              </Form>\n            ) : (\n              <Message variant=\"info\">\n                Para realizar una review debes hacer{\" \"}\n                <Link to=\"/login\">login</Link>\n              </Message>\n            )}\n            <h3>Comentarios</h3>\n            <ListGroup variant=\"flush\">\n              {product?.reviews?.map((item) => (\n                <ListGroup.Item>\n                  <strong>{item.revName}</strong>\n                  <Rating value={item.revRating} color=\"#d3a007\" />\n                  <p>{item.revDate.substring(0, 10)}</p>\n                  <p>{item.revComment}</p>\n                </ListGroup.Item>\n              ))}\n            </ListGroup>\n          </Col>\n        </Row>\n        <hr />\n      </Container>\n    </div>\n  );\n}\n","import axios from \"axios\";\n\nexport const callApi =\n  (url, method, body, constants, isImage = false, token=undefined) =>\n  async (dispatch) => {\n    const { REQUEST, SUCESS, FAIL } = constants;\n    try {\n      \n      dispatch({ type: REQUEST });\n      const { data } = await axios({\n        method,\n        url: url,\n        data: body,\n        headers: {\n          \"Content-Type\": isImage ? \"multipart/form-data\" : \"application/json\",\n          'Authorization': token ? `Bearer ${token}` : \"\",\n        },\n      });\n      dispatch({ type: SUCESS, payload: data });\n    } catch (error) {\n      console.log(error)\n      dispatch({\n        type: FAIL,\n        payload: error.message,\n      });\n    }\n  };","import { Spinner } from \"react-bootstrap\";\nexport default function Loader() {\n  return (\n    <Spinner\n      animation=\"border\"\n      role=\"status\"\n      style={{\n        height: \"100px\",\n        width: \"100px\",\n        display: \"block\",\n        margin: \"auto\",\n      }}\n    />\n  );\n}","import React from 'react'\nimport { Alert } from 'react-bootstrap'\nexport default function Message({variant, children}){\n    const [open, setOpen] = React.useState(true);\n    if (open){\n        return (\n            <Alert  variant={variant} onClose={()=>setOpen(!open)}>\n                {children}\n            </Alert>\n        )\n    }else{\n        return null;\n    }\n}"],"sourceRoot":""}