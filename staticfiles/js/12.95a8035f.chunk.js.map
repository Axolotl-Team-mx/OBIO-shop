{"version":3,"sources":["components/Loader/index.js","components/Message/index.js","components/Rating/index.js","views/Store/ProductScreen/index.js","api/index.js"],"names":["Loader","animation","role","style","height","width","display","margin","Message","variant","children","React","useState","open","setOpen","onClose","Rating","value","text","color","className","initialState","name","comment","rating","user","ProductScreen","history","productId","match","params","id","dispatch","useDispatch","setRating","productDetails","useSelector","state","errorDetails","error","loadingDetails","loading","product","success","userInfo","userLogin","productReview","loadingRev","successRev","errorRev","useEffect","callApi","SUCESS","actions","PRODUCT_DETAILS_SUCCESS","FAIL","PRODUCT_DETAILS_FAIL","REQUEST","PRODUCT_DETAILS_REQUEST","type","PRODUCT_REVIEW_RESET","minHeight","marginTop","overflowX","marginBottom","to","prodName","md","src","prodPic","prodPrice","href","target","class","prodDesc","onClick","e","push","prodId","onSubmit","preventDefault","PRODUCT_REVIEW_SUCCESS","PRODUCT_REVIEW_REQUEST","PRODUCT_REVIEW_FAIL","token","Group","Label","Control","as","onChange","row","event","reviews","map","item","Item","revName","revRating","revDate","substring","revComment","url","method","body","constants","isImage","undefined","a","axios","data","headers","payload","console","log","message"],"mappings":"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","file":"static/js/12.95a8035f.chunk.js","sourcesContent":["import { Spinner } from \"react-bootstrap\";\nexport default function Loader() {\n  return (\n    <Spinner\n      animation=\"border\"\n      role=\"status\"\n      style={{\n        height: \"100px\",\n        width: \"100px\",\n        display: \"block\",\n        margin: \"auto\",\n      }}\n    />\n  );\n}","import React from 'react'\nimport { Alert } from 'react-bootstrap'\nexport default function Message({variant, children}){\n    const [open, setOpen] = React.useState(true);\n    if (open){\n        return (\n            <Alert  variant={variant} onClose={()=>setOpen(!open)}>\n                {children}\n            </Alert>\n        )\n    }else{\n        return null;\n    }\n}","import React from \"react\";\n\nfunction Rating({ value, text, color }) {\n  return (\n    <div className=\"rating\">\n      <span>\n        <i\n          style={{ color }}\n          className={\n            value >= 1\n              ? \"fas fa-star\"\n              : value >= 0.5\n                ? \"fas fa-star-half-alt\"\n                : \"far fa-star\"\n          }\n        ></i>\n      </span>\n\n      <span>\n        <i\n          style={{ color }}\n          className={\n            value >= 2\n              ? \"fas fa-star\"\n              : value >= 1.5\n                ? \"fas fa-star-half-alt\"\n                : \"far fa-star\"\n          }\n        ></i>\n      </span>\n\n      <span>\n        <i\n          style={{ color }}\n          className={\n            value >= 3\n              ? \"fas fa-star\"\n              : value >= 2.5\n                ? \"fas fa-star-half-alt\"\n                : \"far fa-star\"\n          }\n        ></i>\n      </span>\n\n      <span>\n        <i\n          style={{ color }}\n          className={\n            value >= 4\n              ? \"fas fa-star\"\n              : value >= 3.5\n                ? \"fas fa-star-half-alt\"\n                : \"far fa-star\"\n          }\n        ></i>\n      </span>\n\n      <span>\n        <i\n          style={{ color }}\n          className={\n            value >= 5\n              ? \"fas fa-star\"\n              : value >= 4.5\n                ? \"fas fa-star-half-alt\"\n                : \"far fa-star\"\n          }\n        ></i>\n      </span>\n      <span>{text && text}</span>\n    </div>\n  );\n}\n\nexport default Rating;","import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport {\n  Row,\n  Col,\n  Container,\n  Button,\n  Image,\n  ListGroupItem,\n  ListGroup,\n  Form,\n} from \"react-bootstrap\";\nimport Zoom from \"react-medium-image-zoom\";\nimport \"react-medium-image-zoom/dist/styles.css\";\n\nimport { FacebookIcon } from \"react-share\";\n\nimport Rating from \"../../../components/Rating\";\n\nimport { Link } from \"react-router-dom\";\n\nimport Loader from \"../../../components/Loader\";\nimport Message from \"../../../components/Message\";\n\nimport { callApi } from \"../../../api\";\nimport { actions } from \"../../../constants/productConstants\";\n\nimport \"./styles.css\";\nconst initialState = {\n  name: \"\",\n  comment: \"\",\n  rating: 0,\n  user: null,\n};\nexport default function ProductScreen({ history, match }) {\n  const productId = match.params.id;\n  const dispatch = useDispatch();\n\n  const [rating, setRating] = useState(initialState);\n\n  const productDetails = useSelector((state) => state.productDetails);\n  const {\n    error: errorDetails,\n    loading: loadingDetails,\n    success: successDetails,\n    product,\n  } = productDetails;\n  const addToCartHandler = (e) => {\n    userInfo\n      ? history.push(`/cart/${product.prodId}?qty=${1}`)\n      : history.push(\"/login\");\n  };\n  const userLogin = useSelector((state) => state.userLogin);\n  const { userInfo } = userLogin;\n\n  const productReview = useSelector((state) => state.productReview);\n  const {\n    loading: loadingRev,\n    success: successRev,\n    error: errorRev,\n  } = productReview;\n\n  const handleChange = (event) => {\n    setRating({\n      ...rating,\n      [event.target.name]: event.target.value,\n    });\n  };\n  const submitHandler = (e) => {\n    e.preventDefault();\n    dispatch(\n      callApi(\n        `/api/products/createreview/${product?.prodId}/`,\n        \"POST\",\n        rating,\n        {\n          SUCESS: actions.PRODUCT_REVIEW_SUCCESS,\n          REQUEST: actions.PRODUCT_REVIEW_REQUEST,\n          FAIL: actions.PRODUCT_REVIEW_FAIL,\n        },\n        false,\n        userInfo?.token\n      )\n    );\n  };\n  useEffect(() => {\n    dispatch(\n      callApi(\n        `/api/products/getproduct/${productId}/`,\n        \"GET\",\n        {},\n        {\n          SUCESS: actions.PRODUCT_DETAILS_SUCCESS,\n          FAIL: actions.PRODUCT_DETAILS_FAIL,\n          REQUEST: actions.PRODUCT_DETAILS_REQUEST,\n        }\n      )\n    );\n    if (userInfo) {\n      setRating({\n        ...rating,\n        [\"name\"]: userInfo?.name,\n        [\"user\"]: userInfo?.id,\n      });\n    }\n  }, [productId, history, userInfo, successRev]);\n  useEffect(() => {\n    dispatch({ type: actions.PRODUCT_REVIEW_RESET });\n  }, [history]);\n  return loadingDetails ? (\n    <div style={{ minHeight: \"100vh\", marginTop: \"15vh\" }}>\n      <Loader />\n    </div>\n  ) : errorDetails ? (\n    <div style={{ minHeight: \"100vh\", marginTop: \"15vh\" }}>\n      <Message variant=\"danger\">{errorDetails}</Message>\n    </div>\n  ) : (\n    <div\n      style={{ marginTop: \"10vh\", overflowX: \"hidden\", marginBottom: \"5vh\" }}\n    >\n      <Container className=\"p-5\" data-aos={\"fade-down\"}>\n        <div>\n          <Link to=\"/\">\n            <Button>\n              {\" \"}\n              <i className=\"fas fa-exchange-alt\"></i> Regresar\n            </Button>\n          </Link>\n          <h1 className=\"text-primary mt-3\">{product?.prodName}</h1>\n          {/* {product?.categorie[\"name\"] && (\n            <h5 className=\"text-dark\">\n              Categoria: {product?.categorie[\"name\"]}\n            </h5>\n          )} */}\n        </div>\n      </Container>\n      <Container>\n        <Row>\n          <Col md={5}>\n            <Zoom>\n              <img\n                className=\"image-product\"\n                src={`https://res.cloudinary.com/jordiespinoza/${product?.prodPic}`}\n              />\n            </Zoom>\n          </Col>\n          <Col md={4} className=\"p-5\">\n            <h1>\n              $ {product?.prodPrice}\n              MXN\n            </h1>\n            <Rating value={product?.rating} color=\"#d3a007\" />\n            <a\n              href={`https://www.facebook.com/sharer/sharer.php?s=100&p[url]=https://obioshop.herokuapp.com/#/products/${productId}&p[images][0]=&p[title]=Title%20Goes%20Here&p[summary]=Description%20goes%20here!`}\n              target=\"_blank\"\n            >\n              <button type=\"button\" class=\"btn btn-facebook btn-lg\">\n                <i class=\"fab fa-facebook-f\"></i> Compartir en Facebook\n              </button>\n            </a>\n            <span>{product?.prodDesc}</span>\n            {/* <br/>\n            <FacebookIcon /> */}\n            <br />\n            <Button\n              variant=\"success\"\n              type=\"button\"\n              onClick={addToCartHandler}\n              className=\"btn btn-primary\"\n            >\n              Añadir al carro <i className=\"fas fa-shopping-cart\"></i>\n            </Button>\n          </Col>\n          <Col md={3}>\n            {userInfo ? (\n              <Form onSubmit={submitHandler}>\n                <Form.Group>\n                  <Form.Label>Calificación</Form.Label>\n                  <Form.Control\n                    as=\"select\"\n                    // value={rating}\n                    onChange={(e) =>\n                      setRating({\n                        ...rating,\n                        [\"rating\"]: e.target.value,\n                      })\n                    }\n                  >\n                    <option value=\"0\">Selecciona una opción</option>\n                    <option value=\"1\">1 - Muy malo</option>\n                    <option value=\"2\">2 - Malo</option>\n                    <option value=\"3\">3 - Bueno</option>\n                    <option value=\"4\">4 - Muy bueno</option>\n                    <option value=\"5\">5 - Excelente</option>\n                  </Form.Control>\n                </Form.Group>\n                <Form.Group>\n                  <Form.Label>Comentarios</Form.Label>\n                  <Form.Control\n                    as=\"textarea\"\n                    row=\"5\"\n                    name=\"comment\"\n                    onChange={handleChange}\n                    // value={comment}\n                    // onChange={(e) => setComment(e.target.value)}\n                  ></Form.Control>\n                </Form.Group>\n                {errorRev && (\n                  <Message variant=\"danger\">Ingresa una calificación</Message>\n                )}\n                {successRev && (\n                  <Message variant=\"success\">Review agregada</Message>\n                )}\n                {loadingRev ? (\n                  <Loader />\n                ) : (\n                  <Button variant=\"success\" type=\"submit\">\n                    Enviar\n                  </Button>\n                )}\n              </Form>\n            ) : (\n              <Message variant=\"info\">\n                Para realizar una review debes hacer{\" \"}\n                <Link to=\"/login\">login</Link>\n              </Message>\n            )}\n            <h3>Comentarios</h3>\n            <ListGroup variant=\"flush\">\n              {product?.reviews?.map((item) => (\n                <ListGroup.Item>\n                  <strong>{item.revName}</strong>\n                  <Rating value={item.revRating} color=\"#d3a007\" />\n                  <p>{item.revDate.substring(0, 10)}</p>\n                  <p>{item.revComment}</p>\n                </ListGroup.Item>\n              ))}\n            </ListGroup>\n          </Col>\n        </Row>\n        <hr />\n      </Container>\n    </div>\n  );\n}\n","import axios from \"axios\";\n\nexport const callApi =\n  (url, method, body, constants, isImage = false, token=undefined) =>\n  async (dispatch) => {\n    const { REQUEST, SUCESS, FAIL } = constants;\n    try {\n      \n      dispatch({ type: REQUEST });\n      const { data } = await axios({\n        method,\n        url: url,\n        data: body,\n        headers: {\n          \"Content-Type\": isImage ? \"multipart/form-data\" : \"application/json\",\n          'Authorization': token ? `Bearer ${token}` : \"\",\n        },\n      });\n      dispatch({ type: SUCESS, payload: data });\n    } catch (error) {\n      console.log(error)\n      dispatch({\n        type: FAIL,\n        payload: error.message,\n      });\n    }\n  };"],"sourceRoot":""}